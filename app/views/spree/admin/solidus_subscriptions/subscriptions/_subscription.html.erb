<%= content_tag :tr, class: cycle('odd', 'even') do %>
  <%= content_tag :td, class: 'align-center' do %>
    <%= link_to subscription.number, admin_subscription_path(subscription) %>
  <% end %>

  <%= content_tag :td, l(subscription.created_at.to_date), class: 'align-center' %>

  <%= content_tag :td, class: 'align-center' do %>
    <%= link_to subscription.user.email, admin_user_path(subscription.user) %>
  <% end %>

  <%= content_tag :td, class: 'align-center' do %>
    <%= subscription.actionable_date ? l(subscription.actionable_date) : '-' %>
  <% end %>

  <%= content_tag :td, class: 'align-center' do %>
    <%= link_to subscription.subscription_preset.name, admin_subscription_preset_path(subscription.subscription_preset) %>
  <% end %>

  <%= content_tag :td, class: 'align-center' do %>
    <%= content_tag :span, subscription.human_state_name, class: "state #{ subscription.state }" %>
  <% end %>

  <%= content_tag :td, class: 'align-center' do %>
    <%= content_tag :span,  class: "state #{ subscription.processing_state }" do %>
      <%= subscription.class.human_attribute_name("processing_state.#{ subscription.processing_state }") %>
    <% end %>
  <% end %>

  <td class="actions align-center">
    <% if subscription.state_events.include?(:cancel) && can?(:delete, subscription)%>
      <%=
        link_to_with_icon(
          :stop,
          t('.cancel'),
          spree.cancel_admin_subscription_path(subscription),
          no_text: true,
          method: :delete,
          data: { confirm: t('.cancel_alert') }
        )
      %>
    <% end %>

    <% if subscription.state_events.include?(:activate) && can?(:activate, subscription) %>
      <%=
        link_to_with_icon(
          :play,
          t('.activate'),
          spree.activate_admin_subscription_path(subscription),
          no_text: true,
          method: :post
        )
      %>
    <% end %>

    <% if can?(:update, subscription) %>
      <%= link_to_edit(subscription, no_text: true) %>
    <% end %>
  </td>
<% end %>
